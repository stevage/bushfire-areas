(function(e){function t(t){for(var a,i,o=t[0],l=t[1],c=t[2],f=0,h=[];f<o.length;f++)i=o[f],s[i]&&h.push(s[i][0]),s[i]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);u&&u(t);while(h.length)h.shift()();return n.push.apply(n,c||[]),r()}function r(){for(var e,t=0;t<n.length;t++){for(var r=n[t],a=!0,o=1;o<r.length;o++){var l=r[o];0!==s[l]&&(a=!1)}a&&(n.splice(t--,1),e=i(i.s=r[0]))}return e}var a={},s={app:0},n=[];function i(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=a,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(r,a,function(t){return e[t]}.bind(null,a));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var u=l;n.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"034f":function(e,t,r){"use strict";var a=r("64a9"),s=r.n(a);s.a},"0e37":function(e,t,r){"use strict";var a=r("29a8"),s=r.n(a);s.a},1:function(e,t){},2:function(e,t){},2983:function(e,t,r){},"29a8":function(e,t,r){},3:function(e,t){},4:function(e,t){},5:function(e,t){},"56d7":function(e,t,r){"use strict";r.r(t);r("cadf"),r("551c"),r("097d");var a=r("2b0e"),s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"flex flex-column vh-100 avenir",attrs:{id:"app"}},[r("div",{staticClass:"bb b--gray bg-washed-yellow",attrs:{id:"top"}}),r("div",{staticClass:"flex flex-auto",attrs:{id:"middle"}},[r("div",{staticClass:"br b--light-gray overflow-auto w w-20-ns pa2",attrs:{id:"sidebar"}},[e._m(0),r("p",[e._v("It is not intended for any other purpose, including decision making.")]),r("FeatureInfo"),r("Layers",{ref:"layers",attrs:{layers:e.layers}})],1),r("div",{staticClass:"relative flex-auto",attrs:{id:"map-container"}},[r("Map",{attrs:{layers:e.layers,historyColors:e.historyColors}}),r("div",{staticClass:"absolute bg-white ma2 pa2 ba",attrs:{id:"overlay"}},[r("Legend",{attrs:{layers:e.layers,historyColors:e.historyColors},on:{"layers-change":function(t){return e.layers=t}}}),r("Layers",{ref:"layers",attrs:{layers:e.layers}})],1)],1)]),r("div",{staticClass:"bt b--light-gray flex-none",attrs:{id:"bottom"}},[r("p",{domProps:{innerHTML:e._s('Made by <a href="https://hire.stevebennett.me">Steve Bennett.')}})])])},n=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"b i"},[e._v("This is just a demonstration of EMSINA's public fire areas "),r("a",{attrs:{href:"https://www.arcgis.com/home/item.html?id=bc87de02d8ae4911b070607838370184"}},[e._v("spatial endpoints")]),e._v(".")])}],i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"absolute absolute--fill",attrs:{id:"map"}})},o=[],l=(r("a481"),r("96cf"),r("3b8d")),c=r("75fc"),u=r("e192"),f=r.n(u),h=r("8936"),d=r.n(h),p=r("7180"),y=(new a["a"],r("ac6d"),r("f915"),r("078d")),v={data:function(){return{agencyColors:["NSW Rural Fire Service","hsla(0,80%,60%, 0.5)","VIC Dept of Environment, Land, Water and Planning","hsla(40,80%,60%, 0.5)","SA Country Fire Service","hsla(110, 50%, 60%, 0.5)","TAS Tasmanina Fire Service","hsla(300, 80%, 60%, 0.5)"]}},props:["layers","historyColors"],computed:{legendColors:function(){return[["NSW RFS",this.agencyColors[1]],["VIC DELWP",this.agencyColors[3]],["SA CFS",this.agencyColors[5]],["TAS TFS",this.agencyColors[7]]]},activeFillColor:function(){return this.layers.history?"red":["match",["get","Agency"]].concat(Object(c["a"])(this.agencyColors),["blue"])},history:function(){return this.layers.history}},watch:{history:function(e){this.map.U.toggle("fire-history",e),this.map.U.setFillColor("bushfire-fills",this.activeFillColor)}},mounted:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(){var t,r=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:f.a.accessToken="pk.eyJ1Ijoic3RldmFnZSIsImEiOiJjazNmNGV5enAwMTF1M2tuejhtc2twcXo5In0.mLPrYIYJ2FiFZ3KMqVIj6w",t=new f.a.Map({container:"map",center:[145.96,-32.33],zoom:4,style:"mapbox://styles/stevage/ck52zyvft0bdo1co3bzk2vfib/draft",hash:!0}),d.a.init(t,f.a),window.map=t,this.map=t,window.MapVue=this,t.U.onLoad(Object(l["a"])(regeneratorRuntime.mark(function e(){var a,s,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t.U.setFillColor("fire-history",["interpolate",["linear",2],["get","SEASON"]].concat(Object(c["a"])(Object(p["a"])(r.historyColors)))),t.U.setFillOpacity("fire-history",.5),t.U.addGeoJSON("bushfire-areas"),t.U.addFill("bushfire-fills",{source:"bushfire-areas",fillColor:r.activeFillColor,fillOutline:"transparent"}),t.U.addLine("bushfire-lines",{source:"bushfire-areas",lineWidth:2,lineColor:["match",["get","Agency"]].concat(Object(c["a"])(r.agencyColors.map(function(e){return e.replace(/\.\d+\)$/,".9)")})),["blue"])}),t.U.addSymbol("bushfire-labels",{source:"bushfire-areas",textColor:"black",textField:"{Title}",textHaloWidth:1,textHaloColor:"hsla(0,0%,100%,0.5)",textSize:["interpolate",["linear"],["zoom"],6,8,12,16],textOpacity:["interpolate",["linear"],["zoom"],6,["case",[">",["get","Hectares"],1e5],1,0],8,["case",[">",["get","Hectares"],2e4],1,0],10,1],minZoom:8}),t.U.hoverPointer(["bushfire-fills","fire-history"]),t.U.clickLayer(["bushfire-fills","fire-history"],function(e){console.log(e.features[0]),window.FeatureInfo.feature=e.features[0]}),a="https://services9.arcgis.com/ZFlIzBMHgtgl0EYj/arcgis/rest/services/BushfireBoundaries/FeatureServer/0",s=new y({url:a}),n=function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:s.get({where:"1=1"},function(e,r){console.log("Updated data",r),t.U.setData("bushfire-areas",r)});case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),n(),window.setInterval(n,6e5);case 12:case"end":return e.stop()}},e,this)})));case 7:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},b=v,m=r("2877"),g=Object(m["a"])(b,i,o,!1,null,"2c9877ec",null);g.options.__file="Map.vue";var _=g.exports,w=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.feature?r("div",{staticClass:"bt-black"},[r("br"),e.feature&&"bushfire-areas"===e.feature.source?r("div",[r("h2",{staticClass:"mb0",domProps:{innerHTML:e._s(e.title)}}),r("div",{staticClass:"gray"},[e._v(e._s(e.p.Agency))]),r("div",{staticClass:"b mt4"},[e._v("Size: "+e._s(e.p.Hectares.toLocaleString())+" ha")]),r("br"),r("p",{staticClass:"f7"},[e._v("Retrieved: "+e._s(e.p.Date_retrieved))]),r("p",{staticClass:"f7"},[e._v("Published: "+e._s(e.p.PublishedDate))])]):e._e(),e.feature&&"fire_history"===e.feature.sourceLayer?r("div",[r("h2",{staticClass:"mb0"},[e._v(e._s(e.p.NAME))]),r("table",[r("tr",[r("th",[e._v("Season")]),r("td",[e._v(e._s(e.p.SEASON))])]),r("tr",[r("th",[e._v("Area")]),r("td",[e._v(e._s(e.p.AREA_HA))])])])]):e._e()]):e._e()},C=[],L={name:"FeatureInfo",data:function(){return{feature:void 0,ignoreProps:["id","Longitude","Latitude","image_url"]}},computed:{imageUrl:function(){return this.feature&&this.feature.properties.image_url},p:function(){return this.feature&&this.feature.properties},title:function(){return this.p.Title.replace(/ - /g,"<br>")}},created:function(){window.FeatureInfo=this}},S=L,x=(r("0e37"),Object(m["a"])(S,w,C,!1,null,"1eac44ba",null));x.options.__file="FeatureInfo.vue";var F=x.exports,O=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"Layers"}},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.ourLayers.history,expression:"ourLayers.history"}],attrs:{id:"history",type:"checkbox"},domProps:{checked:Array.isArray(e.ourLayers.history)?e._i(e.ourLayers.history,null)>-1:e.ourLayers.history},on:{change:function(t){var r=e.ourLayers.history,a=t.target,s=!!a.checked;if(Array.isArray(r)){var n=null,i=e._i(r,n);a.checked?i<0&&e.$set(e.ourLayers,"history",r.concat([n])):i>-1&&e.$set(e.ourLayers,"history",r.slice(0,i).concat(r.slice(i+1)))}else e.$set(e.ourLayers,"history",s)}}}),r("label",{attrs:{for:"history"}},[e._v("Previously burnt areas (VIC)")])])},j=[],A={name:"Layers",data:function(){return{ourLayers:this.layers}},props:["layers"],created:function(){window.Layers=this},computed:{},watch:{ourLayers:function(){console.log(this.ourLayers),this.$emit("layers-change",this.ourLayers)}}},k=A,I=Object(m["a"])(k,O,j,!1,null,"79ff4c18",null);I.options.__file="Layers.vue";var P=I.exports,M=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("legend",{attrs:{id:"Legend"}},[r("h3",[e._v("This season")]),e._l(e.legendColors(),function(t){return r("div",{staticClass:"pa1"},[r("div",{staticClass:"mr2 dib block w1 h1",style:{background:t[1]}}),r("span",{staticClass:"v-top"},[e._v(e._s(t[0]))])])}),e.layers.history?r("div",[r("h3",[e._v("Past bushfires (VIC)")]),e._l(e.historyColors,function(t){return r("div",{staticClass:"close"},[r("div",{staticClass:"mr2 dib block w1 h1",style:{background:t[1]}}),r("span",{staticClass:"ma0 pa0 v-base"},[e._v(e._s(t[0]))])])})],2):e._e()],2)},T=[],E={name:"Legend",data:function(){return{}},created:function(){window.Legend=this},props:["layers","historyColors"],methods:{legendColors:function(){return this.layers.history?[["Current","red"]]:[["NSW RFS","hsla(0,80%,60%,0.8)"],["VIC DELWP","hsla(40,80%,60%,0.8)"],["SA CFS","hsla(110, 50%, 60%, 0.8)"],["TAS TFS","hsla(300, 80%, 60%, 0.8)"]]},historyLayer:function(){return window.Layers&&window.Layers.layers.history||!1}}},U=E,R=(r("95c5"),Object(m["a"])(U,M,T,!1,null,"0084da87",null));R.options.__file="Legend.vue";var $=R.exports,N={name:"app",data:function(){return{layers:{history:!0},historyColors:[[1900,"hsl(120, 75%, 44%)"],[1940,"hsl(150, 75%, 44%)"],[1980,"hsl(170, 75%, 44%)"],[2e3,"hsl(200, 75%, 44%)"],[2005,"hsl(240, 75%, 44%)"],[2010,"hsl(270, 75%, 44%)"],[2015,"hsl(290, 75%, 44%)"],[2020,"hsl(310, 75%, 44%)"]]}},components:{Map:_,FeatureInfo:F,Layers:P,Legend:$},created:function(){window.App=this}};r("948e");var z=N,H=(r("034f"),Object(m["a"])(z,s,n,!1,null,null,null));H.options.__file="App.vue";var V=H.exports;a["a"].config.productionTip=!1,new a["a"]({render:function(e){return e(V)}}).$mount("#app")},"64a9":function(e,t,r){},"95c5":function(e,t,r){"use strict";var a=r("2983"),s=r.n(a);s.a}});
//# sourceMappingURL=app.d3f3a39d.js.map