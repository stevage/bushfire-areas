(function(e){function t(t){for(var s,n,o=t[0],l=t[1],c=t[2],f=0,h=[];f<o.length;f++)n=o[f],a[n]&&h.push(a[n][0]),a[n]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(e[s]=l[s]);u&&u(t);while(h.length)h.shift()();return i.push.apply(i,c||[]),r()}function r(){for(var e,t=0;t<i.length;t++){for(var r=i[t],s=!0,o=1;o<r.length;o++){var l=r[o];0!==a[l]&&(s=!1)}s&&(i.splice(t--,1),e=n(n.s=r[0]))}return e}var s={},a={app:0},i=[];function n(t){if(s[t])return s[t].exports;var r=s[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=s,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(r,s,function(t){return e[t]}.bind(null,s));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var u=l;i.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"034f":function(e,t,r){"use strict";var s=r("64a9"),a=r.n(s);a.a},"0e37":function(e,t,r){"use strict";var s=r("29a8"),a=r.n(s);a.a},1:function(e,t){},2:function(e,t){},2983:function(e,t,r){},"29a8":function(e,t,r){},3:function(e,t){},4:function(e,t){},5:function(e,t){},"56d7":function(e,t,r){"use strict";r.r(t);r("cadf"),r("551c"),r("097d");var s=r("2b0e"),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"flex flex-column vh-100 avenir",attrs:{id:"app"}},[r("div",{staticClass:"bb b--gray bg-washed-yellow",attrs:{id:"top"}}),r("div",{staticClass:"flex flex-auto",attrs:{id:"middle"}},[r("div",{staticClass:"br b--light-gray overflow-auto w w-30-ns pa2",attrs:{id:"sidebar"}},[e._m(0),r("p",[e._v("It is not intended for any other purpose, including decision making.")]),r("FeatureInfo"),e.bushfires.length?r("div",[r("h3",{staticClass:"mb0"},[e._v("Largest fires")]),r("table",{staticClass:"tl"},[e._m(1),e._l(e.bushfires.slice(0,20),function(t){return r("tr",{staticClass:"tl"},[r("td",{staticClass:"f6 dim shadow-hover pointer",on:{click:function(r){e.clickFire(t)}}},[e._v(e._s(t.properties.Title)+" ")]),r("td",{staticClass:"f7"},[e._v(e._s(Math.round(t.properties.Hectares).toLocaleString()))])])})],2)]):e._e()],1),r("div",{staticClass:"relative flex-auto",attrs:{id:"map-container"}},[r("Map",{attrs:{layers:e.layers,historyColors:e.historyColors},on:{"bushfire-data":function(t){return e.bushfires=t}}}),r("div",{staticClass:"absolute bg-white ma2 pa2 ba",attrs:{id:"overlay"}},[r("Legend",{attrs:{layers:e.layers,historyColors:e.historyColors},on:{"layers-change":function(t){return e.layers=t}}}),r("Layers",{ref:"layers",attrs:{layers:e.layers}})],1)],1)]),r("div",{staticClass:"bt b--light-gray flex-none",attrs:{id:"bottom"}},[r("p",{domProps:{innerHTML:e._s('Made by <a href="https://hire.stevebennett.me">Steve Bennett.')}})])])},i=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"b i"},[e._v("This is just a demonstration of EMSINA's public fire areas "),r("a",{attrs:{href:"https://www.arcgis.com/home/item.html?id=bc87de02d8ae4911b070607838370184"}},[e._v("spatial endpoints")]),e._v(".")])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("tr",[r("th",[e._v("Name")]),r("th",[e._v("Hectares")])])}],n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"absolute absolute--fill",attrs:{id:"map"}})},o=[],l=(r("55dd"),r("a481"),r("96cf"),r("3b8d")),c=r("75fc"),u=r("e192"),f=r.n(u),h=r("8936"),d=r.n(h),p=r("7180"),y=(new s["a"],r("ac6d"),r("f915"),r("078d")),v={data:function(){return{agencyColors:["NSW Rural Fire Service","hsla(0,80%,60%, 0.5)","VIC Dept of Environment, Land, Water and Planning","hsla(40,80%,60%, 0.5)","SA Country Fire Service","hsla(110, 50%, 60%, 0.5)","TAS Tasmanina Fire Service","hsla(300, 80%, 60%, 0.5)"]}},props:["layers","historyColors"],computed:{legendColors:function(){return[["NSW RFS",this.agencyColors[1]],["VIC DELWP",this.agencyColors[3]],["SA CFS",this.agencyColors[5]],["TAS TFS",this.agencyColors[7]]]},activeFillColor:function(){return this.layers.history?"red":["match",["get","Agency"]].concat(Object(c["a"])(this.agencyColors),["blue"])},history:function(){return this.layers.history}},watch:{history:function(e){this.map.U.toggle("fire-history",e),this.map.U.setFillColor("bushfire-fills",this.activeFillColor)}},mounted:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(){var t,r=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:f.a.accessToken="pk.eyJ1Ijoic3RldmFnZSIsImEiOiJjazNmNGV5enAwMTF1M2tuejhtc2twcXo5In0.mLPrYIYJ2FiFZ3KMqVIj6w",t=new f.a.Map({container:"map",center:[145.96,-32.33],zoom:4,style:"mapbox://styles/stevage/ck52zyvft0bdo1co3bzk2vfib/draft",hash:!0}),d.a.init(t,f.a),window.map=t,this.map=t,window.MapVue=this,t.U.onLoad(Object(l["a"])(regeneratorRuntime.mark(function e(){var s,a,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t.U.setFillColor("fire-history",["interpolate",["linear",2],["get","SEASON"]].concat(Object(c["a"])(Object(p["a"])(r.historyColors)))),t.U.setFillOpacity("fire-history",.5),t.U.addGeoJSON("bushfire-areas"),t.U.addFill("bushfire-fills",{source:"bushfire-areas",fillColor:r.activeFillColor,fillOutline:"transparent"}),t.U.addLine("bushfire-lines",{source:"bushfire-areas",lineWidth:2,lineColor:["match",["get","Agency"]].concat(Object(c["a"])(r.agencyColors.map(function(e){return e.replace(/\.\d+\)$/,".9)")})),["blue"])}),t.U.addSymbol("bushfire-labels",{source:"bushfire-areas",textColor:"black",textField:"{Title}",textHaloWidth:1,textHaloColor:"hsla(0,0%,100%,0.5)",textSize:["interpolate",["linear"],["zoom"],6,8,12,16],textOpacity:["interpolate",["linear"],["zoom"],6,["case",[">",["get","Hectares"],1e5],1,0],8,["case",[">",["get","Hectares"],2e4],1,0],10,1],minZoom:8}),t.U.hoverPointer(["bushfire-fills","fire-history"]),t.U.clickLayer(["bushfire-fills","fire-history"],function(e){console.log(e.features[0]),window.FeatureInfo.feature=e.features[0]}),r.map.U.toggle("fire-history",r.layers.history),s="https://services9.arcgis.com/ZFlIzBMHgtgl0EYj/arcgis/rest/services/BushfireBoundaries/FeatureServer/0",a=new y({url:s}),i=function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.get({where:"1=1"},function(e,s){console.log("Updated data",s),t.U.setData("bushfire-areas",s),window.data=s,r.$emit("bushfire-data",s.features.sort(function(e,t){return-e.properties.Hectares+t.properties.Hectares}))});case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),i(),window.setInterval(i,6e5);case 13:case"end":return e.stop()}},e,this)})));case 7:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},b=v,m=r("2877"),g=Object(m["a"])(b,n,o,!1,null,"150fbc14",null);g.options.__file="Map.vue";var _=g.exports,w=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.feature?r("div",{staticClass:"bt-black"},[r("br"),e.feature&&"bushfire-areas"===e.feature.source?r("div",[r("h2",{staticClass:"mb0",domProps:{innerHTML:e._s(e.title)}}),r("div",{staticClass:"gray"},[e._v(e._s(e.p.Agency))]),r("div",{staticClass:"b mt4"},[e._v("Size: "+e._s(e.p.Hectares.toLocaleString())+" ha")]),r("br"),r("p",{staticClass:"f7"},[e._v("Retrieved: "+e._s(e.p.Date_retrieved))]),r("p",{staticClass:"f7"},[e._v("Published: "+e._s(e.p.PublishedDate))])]):e._e(),e.feature&&"fire_history"===e.feature.sourceLayer?r("div",[r("h2",{staticClass:"mb0"},[e._v(e._s(e.p.NAME))]),r("table",[r("tr",[r("th",[e._v("Season")]),r("td",[e._v(e._s(e.p.SEASON))])]),r("tr",[r("th",[e._v("Area")]),r("td",[e._v(e._s(e.p.AREA_HA))])])])]):e._e()]):e._e()},C=[],L={name:"FeatureInfo",data:function(){return{feature:void 0,ignoreProps:["id","Longitude","Latitude","image_url"]}},computed:{imageUrl:function(){return this.feature&&this.feature.properties.image_url},p:function(){return this.feature&&this.feature.properties},title:function(){return this.p.Title.replace(/ - /g,"<br>")}},created:function(){window.FeatureInfo=this}},S=L,F=(r("0e37"),Object(m["a"])(S,w,C,!1,null,"1eac44ba",null));F.options.__file="FeatureInfo.vue";var x=F.exports,O=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"Layers"}},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.ourLayers.history,expression:"ourLayers.history"}],attrs:{id:"history",type:"checkbox"},domProps:{checked:Array.isArray(e.ourLayers.history)?e._i(e.ourLayers.history,null)>-1:e.ourLayers.history},on:{change:function(t){var r=e.ourLayers.history,s=t.target,a=!!s.checked;if(Array.isArray(r)){var i=null,n=e._i(r,i);s.checked?n<0&&e.$set(e.ourLayers,"history",r.concat([i])):n>-1&&e.$set(e.ourLayers,"history",r.slice(0,n).concat(r.slice(n+1)))}else e.$set(e.ourLayers,"history",a)}}}),r("label",{attrs:{for:"history"}},[e._v("Previously burnt areas (VIC)")])])},j=[],k={name:"Layers",data:function(){return{ourLayers:this.layers}},props:["layers"],created:function(){window.Layers=this},computed:{},watch:{ourLayers:function(){console.log(this.ourLayers),this.$emit("layers-change",this.ourLayers)}}},A=k,I=Object(m["a"])(A,O,j,!1,null,"79ff4c18",null);I.options.__file="Layers.vue";var M=I.exports,P=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("legend",{attrs:{id:"Legend"}},[r("h3",[e._v("This season")]),e._l(e.legendColors(),function(t){return r("div",{staticClass:"pa1"},[r("div",{staticClass:"mr2 dib block w1 h1",style:{background:t[1]}}),r("span",{staticClass:"v-top"},[e._v(e._s(t[0]))])])}),e.layers.history?r("div",[r("h3",[e._v("Past bushfires (VIC)")]),e._l(e.historyColors,function(t){return r("div",{staticClass:"close"},[r("div",{staticClass:"mr2 dib block w1 h1",style:{background:t[1]}}),r("span",{staticClass:"ma0 pa0 v-base"},[e._v(e._s(t[0]))])])})],2):e._e()],2)},T=[],E={name:"Legend",data:function(){return{}},created:function(){window.Legend=this},props:["layers","historyColors"],methods:{legendColors:function(){return this.layers.history?[["Current","red"]]:[["NSW RFS","hsla(0,80%,60%,0.8)"],["VIC DELWP","hsla(40,80%,60%,0.8)"],["SA CFS","hsla(110, 50%, 60%, 0.8)"],["TAS TFS","hsla(300, 80%, 60%, 0.8)"]]},historyLayer:function(){return window.Layers&&window.Layers.layers.history||!1}}},U=E,$=(r("95c5"),Object(m["a"])(U,P,T,!1,null,"0084da87",null));$.options.__file="Legend.vue";var H=$.exports,N=r("e400"),R=r.n(N),z={name:"app",data:function(){return{layers:{history:!1},historyColors:[[1900,"hsl(120, 75%, 44%)"],[1940,"hsl(150, 75%, 44%)"],[1980,"hsl(170, 75%, 44%)"],[2e3,"hsl(200, 75%, 44%)"],[2005,"hsl(240, 75%, 44%)"],[2010,"hsl(270, 75%, 44%)"],[2015,"hsl(290, 75%, 44%)"],[2020,"hsl(310, 75%, 44%)"]],bushfires:[]}},components:{Map:_,FeatureInfo:x,Layers:M,Legend:H},created:function(){window.App=this},methods:{clickFire:function(e){var t=R()(e);window.map.fitBounds(t)}}};r("948e");var V=z,W=(r("034f"),Object(m["a"])(V,a,i,!1,null,null,null));W.options.__file="App.vue";var D=W.exports;s["a"].config.productionTip=!1,new s["a"]({render:function(e){return e(D)}}).$mount("#app")},"64a9":function(e,t,r){},"95c5":function(e,t,r){"use strict";var s=r("2983"),a=r.n(s);a.a}});
//# sourceMappingURL=app.32bd150c.js.map